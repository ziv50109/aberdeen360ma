<template>
	<div class="content_box">
		<h3>團隊智慧</h3>
		<div class="content">
			<svg style="display: none;">
				<g id="p4-1" stroke=""><path fill="none" stroke-width="2.844" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M33.434 38.767c1.774 0 3.214 1.429 3.214 3.186v2.823H18.569v-2.823c0-1.757 1.44-3.186 3.214-3.186M24.13 9.505c2.307.916 3.444 1.759 3.444 1.759l.622.117a9.188 9.188 0 0 1 5.866 3.793 14.456 14.456 0 0 1 2.121 11.883l-.259.997a29.94 29.94 0 0 0-.864 5.154 15.28 15.28 0 0 1-1.279 5.025l-.254.57H21.42a7.648 7.648 0 0 1-.643-5.922l.052-.172a9.982 9.982 0 0 1 2.11-3.771l2.793-3.136a1.546 1.546 0 0 0-.175-2.232 1.576 1.576 0 0 0-1.038-.359l-4.522.104-.673 1.213a1.63 1.63 0 0 1-1.857.771 3.573 3.573 0 0 1-2.548-2.715l-.101-.5a1.546 1.546 0 0 1 .415-1.397l3.536-3.607c.39-.396.722-.842.983-1.328a5.943 5.943 0 0 1 1.689-1.948l1.987-1.473-1.789-2.189a.636.636 0 0 1 .604-1.03c.515.088 1.179.111 1.887.393z"/><path fill="none" stroke-width="3.273" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="22.926" d="M27 1.671c7.012 0 13.361 2.967 17.959 7.761 4.595 4.795 7.439 11.421 7.439 18.737 0 4.258-.963 8.28-2.672 11.845-3.27 6.82-16.539 22.861-22.726 29.314-6.185-6.453-19.454-22.494-22.725-29.313A27.314 27.314 0 0 1 1.602 28.17C1.602 13.537 12.973 1.671 27 1.671z"/></g>
				<path id="p4-2" fill="none" stroke="" stroke-width="2.816" stroke-miterlimit="10" d="M39.062 8.424a21.557 21.557 0 0 0-30.75-1.081C-.47 15.649-.948 29.6 7.248 38.503c8.198 8.905 21.965 9.388 30.749 1.081 8.783-8.305 9.261-22.256 1.065-31.16zM40.143 23.738c-.29-9.667-8.259-17.268-17.798-16.975M35.827 41.263l4.751 5.161 4.086-3.865-4.749-5.159M12.681 21.437h6.763v9.261h-6.763zM19.444 16.723h6.767v13.975h-6.767zM26.211 21.437h6.766v9.261h-6.766zM56.534 52.333l-9.119-9.904a1.766 1.766 0 0 0-2.521-.086l-4.547 4.297a1.827 1.827 0 0 0-.085 2.554l9.117 9.905M49.379 59.099l3.756 4.079a1.768 1.768 0 0 0 2.521.088l4.545-4.298c.722-.681.76-1.823.088-2.556l-3.756-4.079"/>
				<g id="p4-3" stroke=""><path fill="none" stroke-width="2.904" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M14.407 24.105l-.991-.197c1.195-6.097 6.094-10.861 12.188-11.855l.162 1.003c-5.679.926-10.247 5.368-11.359 11.049zM41.6 24.105c-1.115-5.685-5.681-10.128-11.366-11.051l.162-1.003c6.098.99 11 5.758 12.196 11.857l-.992.197zM41.6 24.105c-1.115-5.685-5.681-10.128-11.366-11.051l.162-1.003c6.098.99 11 5.758 12.196 11.857l-.992.197zM25.604 41.589c-6.444-1.053-11.522-6.341-12.348-12.86l1-.129c.77 6.076 5.502 11.005 11.509 11.988l-.161 1.001zM25.604 41.589c-6.444-1.053-11.522-6.341-12.348-12.86l1-.129c.77 6.076 5.502 11.005 11.509 11.988l-.161 1.001zM30.396 41.591l-.162-1.003c6.01-.978 10.744-5.909 11.516-11.988l1.001.129c-.827 6.522-5.908 11.813-12.355 12.862M30.396 41.591l-.162-1.003c6.01-.978 10.744-5.909 11.516-11.988l1.001.129c-.827 6.522-5.908 11.813-12.355 12.862zM27.495 7.584h1.009v8.044h-1.009zM27.495 7.584h1.009v8.044h-1.009zM27.495 38.328h1.009v8.043h-1.009zM27.495 38.328h1.009v8.043h-1.009zM39.277 25.839h7.996v1.017h-7.996zM39.277 25.839h7.996v1.017h-7.996zM8.727 25.839h7.994v1.017H8.727zM8.727 25.839h7.994v1.017H8.727z"/><path fill="none" stroke-width="1.851" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M28 31.117c-2.616 0-4.742-2.138-4.742-4.769 0-2.633 2.126-4.772 4.742-4.772 2.614 0 4.74 2.139 4.74 4.772.001 2.631-2.125 4.769-4.74 4.769zm0-8.892c-2.259 0-4.097 1.85-4.097 4.124 0 2.273 1.838 4.122 4.097 4.122 2.259 0 4.096-1.849 4.096-4.122 0-2.275-1.837-4.124-4.096-4.124z"/><path fill="none" stroke-width="3.398" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="22.926" d="M28 1.706c7.265 0 13.84 2.963 18.602 7.754a26.468 26.468 0 0 1 7.704 18.718c0 4.252-.998 8.272-2.769 11.833C48.149 46.821 34.405 62.848 28 69.296 21.594 62.848 7.852 46.821 4.463 40.011a26.49 26.49 0 0 1-2.77-11.833C1.693 13.558 13.472 1.706 28 1.706z"/></g>
				<g id="p4-4" stroke=""><path fill="none" stroke-width="2.9" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="22.926" d="M29.5 72.527C12.742 65.044 1.428 50.85 1.428 34.566c0-8.344.097-16.707.097-25.06 2.512 3.05 7.57 3.088 13.404 3.088 6.976 0 12.845-7.073 14.572-11.123 1.729 4.05 7.597 11.123 14.573 11.123 5.833 0 10.893-.038 13.403-3.088 0 8.353.094 16.715.094 25.06C57.57 50.85 46.259 65.044 29.5 72.527z"/><path fill="none" stroke-width="2.416" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="22.926" d="M35.469 29.603c-.953 3.4-3.535 5.875-5.992 5.999-2.464-.124-5.058-2.615-6-6.032l-.465.075a.971.971 0 0 1-1.103-.832l-.456-3.021c-.082-.541.282-1.053.806-1.137l.331-.053a5.053 5.053 0 0 1-.227-1.5V21.99c0-2.723 2.159-4.949 4.796-4.949h.571a.625.625 0 0 1 .037-.264c.295-.802 2.26-.777 4.395.055.452.178.876.377 1.262.589 1.732.748 2.96 2.517 2.96 4.569v1.112c0 .523-.08 1.026-.227 1.5l.329.053c.526.084.887.596.806 1.137l-.456 3.021c-.082.543-.575.916-1.103.832l-.264-.042zM12.544 52.972l-.861-8.077v-.85c0-1.887 1.851-2.977 3.398-3.297 1.41-.297 6.692-1.479 8.4-2.699l.105-.015 3.093 14.961 1.856-9.87-1.575-4.181h5.075l-1.57 4.181 1.803 9.87 3.146-14.961.102.015c1.71 1.221 6.993 2.402 8.404 2.699 1.545.32 3.397 1.41 3.397 3.297v.85l-.861 8.077"/></g>
				<path id="p4-arrow" fill="none" stroke="#e0e0e0" stroke-width="2.321" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="22.926" d="M63.861 48.917l-2.954 10.9-10.647-3.111M60.423 58.547S44.411 19.92 1.139 1.181"/>
			</svg>
			<svg class="items" :view-box.camel="`0, 0, 740, 510`">
				<g class="arrow_wrap" transform="translate(234, 132)">
					<use xlink:href="#p4-arrow" transform="translate(202, 0)"/>
					<use xlink:href="#p4-arrow" transform="translate(202, 194) rotate(90, 32.5, 30.5)"/>
					<use xlink:href="#p4-arrow" transform="translate(2, 194) rotate(180, 32.5, 30.5)"/>
					<use xlink:href="#p4-arrow" transform="translate(2, 0) rotate(-90, 32.5, 30.5)"/>
				</g>
				<g class="item_wrap" transform="translate(164, 64)">
					<g v-for="(item, index) in items"
						:class="`item item${index + 1} ${hoverIndex === index ? 'active' : ''}`"
						:transform="`translate(${item.itemTranslate[0]}, ${item.itemTranslate[1]})`"
						@mouseenter="hover(index)"
						@touchend="touchend(index)"
						@mouseleave="leave()">
						<g class="circle">
							<circle class="s" cx="58.5" cy="58.5" r="58.5"/>
							<circle class="b" cx="58.5" cy="58.5" r="58.5" transform="translate(5,0)"/>
						</g>
						<use :xlink:href="item.xlink" stroke="#fff" :transform="`translate(${item.iconTranslate[0]}, ${item.iconTranslate[1]})`"/>
						<text text-anchor="middle" :transform="`translate(${item.textTranslate[0]}, ${item.textTranslate[1]})`">
							<tspan v-for="(text, index) in item.text"
								:x="`${index === 0 ? '3' : '0'}`"
								:dy="`${item.text.length > 1 ? '1.3em' : ''}`">
								{{ text }}
							</tspan>
						</text>
					</g>
				</g>
			</svg>
			<div class="info_wrap">
				<div :class="`info-box info-box${index + 1} ${hoverIndex === index ? 'active' : ''}`"
					v-for="(item, index) in contents"
					v-show="hoverIndex === index">
					<svg :view-box.camel="item.viewbox">
						<use :xlink:href="item.xlink"/>
					</svg>
					<h4 class="title">{{ item.title }}</h4>
					<p>{{ item.content }}</p>
				</div>
			</div>
		</div>
	</div>
</template>
<script>
	export default {
		name: 'page4',
		data() {
			return {
				hoverIndex: 0,
				items: [
					{
						itemTranslate: [144, 0],
						xlink: '#p4-1',
						iconTranslate: [33, 22],
						textTranslate: [60, -20],
						text: ['策略性資產配置'],
					},
					{
						itemTranslate: [292, 136],
						xlink: '#p4-2',
						iconTranslate: [30, 22],
						textTranslate: [198, 16],
						text: ['投資標的', '研究與篩選'],
					},
					{
						itemTranslate: [144, 270],
						xlink: '#p4-3',
						iconTranslate: [32, 22],
						textTranslate: [60, 156],
						text: ['戰術性資產配置'],
					},
					{
						itemTranslate: [0, 136],
						xlink: '#p4-4',
						iconTranslate: [31, 22],
						textTranslate: [-72, 16],
						text: ['持續性的', '風險管理'],
					},
				],
				contents: [
					{
						xlink: '#p4-1',
						viewbox: '0 0 54 71',
						title: '策略性資產配置',
						content: '運用3至5年長期經濟展望與相關系數分析，完成基金整體資產配置',
					},
					{
						xlink: '#p4-2',
						viewbox: '0 0 62 65',
						title: '投資標的研究與篩選',
						content: '針對擬配置的資產類別，深入篩選一般與另類投資標的',
					},
					{
						xlink: '#p4-3',
						viewbox: '0 0 56 71',
						title: '戰術性資產配置',
						content: '依6個月短期觀點，針對各部位再進行微調',
					},
					{
						xlink: '#p4-4',
						viewbox: '0 0 59 74',
						title: '持續性的風險管理',
						content: '持續監控投組波動表現並進行各類模擬情境分析，確保投組的穩定表現',
					},
				],
				autoPlayTimer: undefined,
			};
		},
		mounted: function() {
			this.autoPlay();
		},
		methods: {
			hover: function(index) {
				clearInterval(this.autoPlayTimer);
				this.hoverIndex = index;
			},
			touchend: function(index) {
				this.hover(index);
				setTimeout(()=> {
					this.autoPlay();
				}, 1000);
			},
			leave: function() {
				this.autoPlay();
			},
			autoPlay: function() {
				this.autoPlayTimer = clearInterval(this.autoPlayTimer);
				this.autoPlayTimer = setInterval(()=> {
					this.hoverIndex += 1;
					if(this.hoverIndex > this.items.length-1) {
						this.hoverIndex = 0;
					}
				}, 3000);
			},
		},
	};
</script>
<style lang="scss" scoped>
	@import "./../assets/scss/variable";

	.items {
		width: 500px;
		height: 344px;
		margin: 20px 0 14px;
	}
	.item {
		opacity: .3;
		cursor: pointer;
		transition: opacity .3s;
		text {
			fill: #0d1d50;
			font-size: 28px;
			font-weight: bold;
		}
		&1 {
			.s { fill: #ea335a; }
			.b { fill: #f65275; }
		}
		&2 {
			.s { fill: #418b05; }
			.b { fill: #58a618; }
		}
		&3 {
			.s { fill: #006875; }
			.b { fill: #008495; }
		}
		&4 {
			.s { fill: #d78900; }
			.b { fill: #ffa300; }
		}
		&.active { opacity: 1; }
	}
	.info_wrap {
		width: 100%;
		height: 106px;
	}
	.info-box {
		position: absolute;
		left: 0;
		right: 0;
		text-align: center;
		opacity: 0;
		transition: opacity .3s;
		&.active { opacity: 1; }
		&1 {
			svg {
				stroke: #f65275;
				width: 27px;
				height: 35px;
			}
			.title {
				background-color: #f65275;
			}
		}
		&2 {
			svg {
				stroke: #58a618;
				width: 36px;
				height: 36px;
			}
			.title {
				margin-left: -3px;
				background-color: #58a618;
			}
		}
		&3 {
			svg {
				stroke: #008495;
				width: 28px;
				height: 35px;
			}
			.title {
				background-color: #008495;
			}
		}
		&4 {
			svg {
				stroke: #ffa300;
				width: 28px;
				height: 35px;
			}
			.title {
				background-color: #ffa300;
			}
		}
		svg {
			vertical-align: bottom;
		}
		.title {
			text-align: center;
			display: inline-block;
			width: 210px;
			line-height: 1.7;
			margin-left: 5px;
			font-size: 18px;
			font-weight: bold;
			color: #fff;
			border-radius: 30px;
		}
		p {
			width: 440px;
			line-height: 1.8;
			margin: 15px auto 0;
			font-size: 16px;
			color: #444;
		}
	}

	@media screen and (max-width: $mobileSize) {
		.items {
			width: 740px;
			height: 510px;
			margin: 20px 0 14px;
		}
		.info_wrap { height: 186px; }
		.info-box {
			&1 {
				svg {
					width: 27/.63+px;
					height: 35/.63+px;
				}
			}
			&2 {
				svg {
					width: 36/.63+px;
					height: 36/.63+px;
				}
				.title {
					margin-left: -3px;
				}
			}
			&3 {
				svg {
					width: 28/.63+px;
					height: 35/.63+px;
				}
			}
			&4 {
				svg {
					width: 28/.63+px;
					height: 35/.63+px;
				}
			}
			.title {
				width: 340px;
				margin-left: 5px;
				font-size: 30px;
				border-radius: 30px;
			}
			p {
				width: 690px;
				margin: 20px auto 0;
				font-size: 30px;
			}
		}
	}

	@media screen and (max-width: $mobileSize2) {
		.items {
			width: 740/750*100+vw;
			height: 510/750*100+vw;
			margin: 20/750*100+vw 0 14/750*100+vw;
		}
		.info_wrap { height: 186/750*100+vw; }
		.info-box {
			&1 {
				svg {
					width: 27/.63/750*100+vw;
					height: 35/.63/750*100+vw;
				}
			}
			&2 {
				svg {
					width: 36/.63/750*100+vw;
					height: 36/.63/750*100+vw;
				}
				.title {
					margin-left: -3/750*100+vw;
				}
			}
			&3 {
				svg {
					width: 28/.63/750*100+vw;
					height: 35/.63/750*100+vw;
				}
			}
			&4 {
				svg {
					width: 28/.63/750*100+vw;
					height: 35/.63/750*100+vw;
				}
			}
			.title {
				width: 340/750*100+vw;
				margin-left: 5/750*100+vw;
				font-size: 30/750*100+vw;
				border-radius: 30/750*100+vw;
			}
			p {
				width: 690/750*100+vw;
				margin: 20/750*100+vw auto 0;
				font-size: 30/750*100+vw;
			}
		}
	}
</style>
